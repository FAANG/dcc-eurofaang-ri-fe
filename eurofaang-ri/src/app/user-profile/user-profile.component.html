<div *ngIf="userProfile" class="user-profile-container">
  <div class="item">
    <h1 class="profile-heading">User profile</h1>
    <mat-card class="profile-card">
      <mat-card-header>
        <mat-card-title>{{ userProfile?.first_name }} {{ userProfile?.last_name }}</mat-card-title>
        <mat-card-subtitle>{{ userProfile?.username }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-list role="list">
          <mat-list-item role="listitem">
            <b>Email: </b>alexey&#64;ebi.ac.uk
          </mat-list-item>
          <mat-list-item role="listitem">
            <b>Phone: </b> NA
          </mat-list-item>
          <mat-list-item role="listitem">
            <b>Organization name: </b>EMBL-EBI
          </mat-list-item>
          <mat-list-item role="listitem">
            <b>Organization country: </b>UK
          </mat-list-item>
          <mat-list-item role="listitem">
            <b>Role: </b>Principal Investigator
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="item">
    <h1 class="profile-heading">
      TNA Applications
      <button mat-flat-button color="primary" routerLink="/tna/new">Start New Application</button>
    </h1>
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID</th>
        <td mat-cell *matCellDef="let element"> {{ element.id }}</td>
      </ng-container>

      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef> Title</th>
        <td mat-cell *matCellDef="let element"><a routerLink="/tna/edit/{{element.id}}">{{ element.title }} </a></td>
      </ng-container>

      <ng-container matColumnDef="pi">
        <th mat-header-cell *matHeaderCellDef> Principal Investigator</th>
        <td mat-cell *matCellDef="let element"> {{ element.pi|json }}</td>
      </ng-container>

      <ng-container matColumnDef="connected">
        <th mat-header-cell *matHeaderCellDef> Connected to another TNA</th>
        <td mat-cell *matCellDef="let element">
          @if (element.connected === 'yes') {
            <a style="cursor: pointer" routerLink="/tna/edit/{{element.connectedProject}}">
              {{ element.connected | uppercase}}
            </a>
          } @else {
            {{ element.connected | uppercase }}
          }
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>
